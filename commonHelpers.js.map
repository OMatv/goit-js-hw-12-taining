{"version":3,"file":"commonHelpers.js","sources":["../src/main.js"],"sourcesContent":["// import axios from 'axios';\n\n// Створи фільмотеку з популярними фільмами\n\nconst BASE_URL = ' https://api.themoviedb.org/3';\nconst END_POINT = 'trending/movie/week';\nconst API_KEY = '345007f9ab440e5b86cef51be6397df1';\n\n// axios({\n//   url: `${BASE_URL}${END_POINT}`,\n//   headers: {\n//     accept: 'application/json',\n//     Authorization: 'Bearer 'accept: application/json',\n//   },\n// })\n\nlet page = 1;\n\nconst selectors = {\n  container: document.querySelector('.js-movie-list'),\n  loadBtn: document.querySelector('.js-load-more'),\n};\n\nselectors.loadBtn.addEventListener('click', loadMore);\n\nserviceMovie(page)\n  .then(data => {\n    selectors.container.insertAdjacentHTML(\n      'beforeend',\n      createMarkup(data.results)\n    );\n    //   if (data.page <= data.total_pages) {}\n    if (data.page < 500) {\n      selectors.loadBtn.classList.replace('load-more-hidden', 'load-more');\n    }\n  })\n\n  .catch(error => alert(error.message));\n\nasync function serviceMovie(page = 1) {\n  const { data } = await axios(`${BASE_URL}${END_POINT}`, {\n    params: {\n      api_key: API_KEY,\n      page,\n    },\n  });\n  return data;\n}\n\nfunction createMarkup(arr) {\n  return arr\n    .map({\n      id,\n      poster_path,\n      original_title,\n      release_date,\n      vote_average,\n    })(\n      `\n    <li class=\"movie-card\" data-id=\"${id}\" >\n            <img src=\"https://image.tmdb.org/t/p/w300${poster_path}\" alt=\"${original_title}>\n            <div class=\"movie-info\">\n            <h2>${original_title}</h2>\n            <p>Release Date: ${release_date}</p>\n            <p>Vote Average: ${vote_average}</p>\n            </div>\n        `\n    )\n    .join('');\n}\n\nasync function loadMore() {\n  page += 1;\n\n  selectors.loadBtn.disabled = true;\n\n  try {\n    const data = await serviceMovie(page);\n    selectors.container.insertAdjacentHTML(\n      'beforeend',\n      createMarkup(data.results)\n    );\n\n    selectors.loadBtn.disabled = false;\n\n    if (data.page >= 500) {\n      selectors.loadBtn.classList.replace('load-more', 'load-more-hidden');\n    }\n  } catch (error) {\n    alert(error.message);\n  }\n}\n"],"names":["BASE_URL","END_POINT","API_KEY","page","selectors","loadMore","serviceMovie","data","createMarkup","error","arr"],"mappings":"ssBAIA,MAAMA,EAAW,gCACXC,EAAY,sBACZC,EAAU,mCAUhB,IAAIC,EAAO,EAEX,MAAMC,EAAY,CAChB,UAAW,SAAS,cAAc,gBAAgB,EAClD,QAAS,SAAS,cAAc,eAAe,CACjD,EAEAA,EAAU,QAAQ,iBAAiB,QAASC,CAAQ,EAEpDC,EAAaH,CAAI,EACd,KAAKI,GAAQ,CACZH,EAAU,UAAU,mBAClB,YACAI,EAAaD,EAAK,OAAO,CAC/B,EAEQA,EAAK,KAAO,KACdH,EAAU,QAAQ,UAAU,QAAQ,mBAAoB,WAAW,CAEzE,CAAG,EAEA,MAAMK,GAAS,MAAMA,EAAM,OAAO,CAAC,EAEtC,eAAeH,EAAaH,EAAO,EAAG,CACpC,KAAM,CAAE,KAAAI,CAAM,EAAG,MAAM,MAAM,GAAGP,CAAQ,GAAGC,CAAS,GAAI,CACtD,OAAQ,CACN,QAASC,EACT,KAAAC,CACD,CACL,CAAG,EACD,OAAOI,CACT,CAEA,SAASC,EAAaE,EAAK,CACzB,OAAOA,EACJ,IAAI,CACH,GACA,YACA,eACA,aACA,YACN,CAAK,EACC;AAAA,sCACgC,EAAE;AAAA,uDACe,WAAW,UAAU,cAAc;AAAA;AAAA,kBAExE,cAAc;AAAA,+BACD,YAAY;AAAA,+BACZ,YAAY;AAAA;AAAA,SAGtC,EACA,KAAK,EAAE,CACZ,CAEA,eAAeL,GAAW,CACxBF,GAAQ,EAERC,EAAU,QAAQ,SAAW,GAE7B,GAAI,CACF,MAAMG,EAAO,MAAMD,EAAaH,CAAI,EACpCC,EAAU,UAAU,mBAClB,YACAI,EAAaD,EAAK,OAAO,CAC/B,EAEIH,EAAU,QAAQ,SAAW,GAEzBG,EAAK,MAAQ,KACfH,EAAU,QAAQ,UAAU,QAAQ,YAAa,kBAAkB,CAEtE,OAAQK,EAAO,CACd,MAAMA,EAAM,OAAO,CACpB,CACH"}